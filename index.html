<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vanta@0.5.24/dist/vanta.net.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Vanta.js initialization
    const isMobile = window.innerWidth <= 768;
    let vantaEffect = VANTA.NET({
      el: "#vanta-bg",
      mouseControls: !isMobile,
      touchControls: isMobile,
      gyroControls: false,
      minHeight: 200.00,
      minWidth: 200.00,
      scale: 1.00,
      scaleMobile: 1.00,
      color: 0xFFF8E1,
      backgroundColor: 0x000000,
      points: isMobile ? 8.0 : 15.0,
      maxDistance: isMobile ? 18.0 : 25.0,
      spacing: isMobile ? 12.0 : 18.0,
      showDots: true,
      lineOpacity: isMobile ? 0.15 : 0.25
    });

    // Hero Carousel
    const heroSlides = document.querySelectorAll('.hero-slide');
    let currentHeroSlide = 0;

    function showHeroSlide(index) {
      heroSlides.forEach((slide, i) => {
        slide.classList.toggle('active', i === index);
      });
    }

    function nextHeroSlide() {
      currentHeroSlide = (currentHeroSlide + 1) % heroSlides.length;
      showHeroSlide(currentHeroSlide);
    }

    showHeroSlide(currentHeroSlide);
    setInterval(nextHeroSlide, 5000);

    // Article Data
    const articles = {
      1: {
        title: 'SWING promo party at Thaixotix',
        date: '25 January 2025',
        text: 'In the end, one month of thinking made us realise that we want to make another promo event… Sponsored by PP crypto coin a.k.a. XD$, we were able to set up in Thaixotix shop. Womderfull place at the old-town of Bangkok. All the preparations took us a couple of days to set up, including our own soundsystem, as long as decoration with the real flowers. We had two surprises in, one form real Taipei legend Gao Xiao Gao participating in our event ! Another one was our secret guest Malina Scar. Gao Xiao Gao gave live performance of her music for live audience. In terms of public this event was kinda disappointed me not because of amount of guests we actually had more than 130 ! people, but some of some of their behaviour. Even though, this small detail could not ruin the evening and the outcome of this event was ONLY extremely positive… So stay TUNED for now, it might happen again !',
        images: [
          'https://via.placeholder.com/600x200?text=Article+Image+1',
          'https://via.placeholder.com/600x200?text=Article+Image+2'
        ]
      },
      2: {
        title: 'Starstoke promotion opening ivent.',
        date: '13 December 2024',
        text: 'Starstoke A.K.A. Swing platform took its official opening ceremony at «Sandy studio», followed by second concert-event! We got to showcase some local talents, plus get to know so many incredible people. Even if it was rough this experience still gave us a lot to think about in terms of physical events. What came out of it is in the next news topic… Stay TUNED',
        images: [
          'https://via.placeholder.com/600x200?text=Festival+Image+1',
          'https://via.placeholder.com/600x200?text=Festival+Image+2'
        ]
      },
      3: {
        title: 'ETOPOLE Visual digest from the capital!',
        date: '28 September 2025',
        text: 'Slut Online at ETOPOLE with the team of “Vent Music” platform. Quick video digest, showcase of not only the artist, but also full production in motion. With collaboration featuring Biopunkcamera Performance Production.',
        images: [
          'https://via.placeholder.com/600x200?text=Collection+Image+1',
          'https://via.placeholder.com/600x200?text=Collection+Image+2'
        ]
      },
      4: {
        title: 'HYPERBEAST ! Slut Online Thaipei live performance',
        date: '2 March 2024',
        text: 'Event hosted by «UWP 數位藝術音樂節 Digital Art Center Music Festival 001» in Thaipei saw participation with our incredible sound and music designer Slut Online, who also got a feature in Thaiwan HYPERBEAST promo! <br>Read the official event news page <a href="https://events.mcu.edu.tw/event/uwp-%E6%95%B8%E4%BD%8D%E8%97%9D%E8%A1%93%E9%9F%B3%E6%A8%82%E7%AF%80-digital-art-center-music-festival-001-slut-online/">here</a>',
        images: [
          'https://via.placeholder.com/600x200?text=Event+Image+1',
          'https://via.placeholder.com/600x200?text=Event+Image+2'
        ],
        videoPreview: 'https://img.youtube.com/vi/WRd3OcMby4Q/maxresdefault.jpg',
        videoUrl: 'https://youtu.be/WRd3OcMby4Q?si=W84p44nTXbD8Wd8R',
        creditsUrl: 'https://dac.taipei/en/project/dacu-uwp-digital-art-and-music-festival-001-slut-online'
      },
      5: {
        title: 'SWING+ market at Freeform "Space Based Community" VOL.5 - Art&Music Week',
        date: '2 March 2025',
        text: 'SWING+ merch & thrift marketplace took it’s place at Gumpscross space. Alongside some other terrific designers and creators, we were happy to be part of such a fun pleasent experience. Followed by a surprise appearance of <a href="https://www.instagram.com/fake_toooth?igsh=bHFqdXBhZnZtZXBq" style="color: red;">FakeToooth</a>, evening finished with a rooftop party. Stay TUNED for more news and updates !',
        images: [
          'https://via.placeholder.com/600x200?text=Event+Image+1',
          'https://via.placeholder.com/600x200?text=Event+Image+2'
        ]
      },
      6: {
        title: 'VIP $XD creator live stram set-up',
        date: '15 October 2025',
        text: 'Controversial internet crypto community persona $XD creator gave special surprise live interview to <a href="https://youtube.com/@rasmrr?si=wCTCRalB8Xi9BaMy" target="_blank">rasmr</a>, hosted by our team. We provided her persona with some funky generative animations and, mostly important, space for the interview itself. You can also check out live freestyle by bellowed Anika (a.k.a $XD PP-crypto coin creator)! Click here to see full performance <a href="https://youtube.com/playlist?list=PLDOiK-1Pysb73lX5hD82-C9EkdGkZ-vGn&si=QsCnGkl_JRSyv1d2" target="_blank">here</a>!',
        images: [
          'https://via.placeholder.com/600x200?text=Placeholder+Image+1',
          'https://via.placeholder.com/600x200?text=Placeholder+Image+2'
        ],
        videoPreview: 'https://img.youtube.com/vi/VIDEO_ID/maxresdefault.jpg', // Replace VIDEO_ID with an actual video ID from the playlist
        videoUrl: 'https://youtube.com/playlist?list=PLDOiK-1Pysb73lX5hD82-C9EkdGkZ-vGn&si=QsCnGkl_JRSyv1d2',
        creditsUrl: 'https://youtube.com/@rasmrr?si=wCTCRalB8Xi9BaMy'
      },
      7: {
        title: 'Malina Scar birthday party digest',
        date: '20 October 2025',
        text: 'Placeholder text for Malina Scar birthday party digest. More details coming soon...',
        images: [
          'https://via.placeholder.com/600x200?text=Placeholder+Image+1',
          'https://via.placeholder.com/600x200?text=Placeholder+Image+2'
        ]
      },
      8: {
        title: 'LOVESOMEMAMA live appreciate',
        date: '25 October 2025',
        text: 'Placeholder text for LOVESOMEMAMA live appreciate. More details coming soon...',
        images: [
          'https://via.placeholder.com/600x200?text=Placeholder+Image+1',
          'https://via.placeholder.com/600x200?text=Placeholder+Image+2'
        ]
      }
    };

    // Modal Functionality
    const modal = document.getElementById('article-modal');
    const modalTitle = modal.querySelector('.modal-title');
    const modalDate = modal.querySelector('.modal-date');
    const modalText = modal.querySelector('.modal-text');
    const modalImages = modal.querySelector('.modal-images');
    const modalClose = modal.querySelector('.modal-close');

    function openModal(articleId) {
      const article = articles[articleId];
      modalTitle.innerHTML = article.title.replace('Thaixotix', '<span style="color: #32CD32;">Thaixotix</span>');
      modalDate.textContent = article.date;
      modalText.innerHTML = article.text;

      if (article.videoPreview && article.videoUrl && article.creditsUrl) {
        modalText.innerHTML += `
          <a href="${article.videoUrl}" target="_blank" class="modal-video-preview" style="background-image: url('${article.videoPreview}');"></a>
          <a href="${article.creditsUrl}" target="_blank" class="modal-credits">Credits</a>
        `;
      }

      modalImages.innerHTML = article.images.map(img => 
        `<div class="modal-image" style="background-image: url('${img}');"></div>`
      ).join('');
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      modal.classList.remove('active');
      document.body.style.overflow = '';
    }

    // News card click event
    document.querySelectorAll('.news-card').forEach(card => {
      card.addEventListener('click', () => {
        const articleId = card.getAttribute('data-article-id');
        openModal(articleId);
      });
    });

    // Hero slide click event
    document.querySelectorAll('.hero-slide').forEach(slide => {
      slide.addEventListener('click', () => {
        const articleId = slide.querySelector('.hero-title').getAttribute('data-article-id');
        openModal(articleId);
      });
    });

    modalClose.addEventListener('click', closeModal);

    // Make sections visible on scroll
    const sections = document.querySelectorAll('.section');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, { threshold: 0.1 });

    sections.forEach(section => observer.observe(section));
  });
</script>